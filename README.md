# Шаг 16 - Храним стейт в сессии

Теперь наш навык уже можно выкладывать для пользователей.
Но.. все же осталась одна проблема, которая произойдет при выкладке новой версии навыка.
<details>
 <summary>Какая?</summary>

 При перезапуске сервера переменная `questions` обнулится. Пользователи, которые в момент обновления общаются с навыком,
 получат странное поведение: неожиданно навык просто забудет текущий вопрос и выдаст новый.
 Чтобы такого не происходило, приложение вообще не должно хранить никакого состояния.
 Все данные лучше держать в отдельном хранилище, например в бд. Тогда перезапуск приложения будет безопасным.
 У навыков Алисы есть встроенная возможность [хранить состояние сессии](https://yandex.ru/dev/dialogs/alice/doc/session-persistence-docpage/) - давайте ею воспользуемся!
</details>

1. Удаляем переменную `questions` и все что с ней связано - это нам больше не пригодится
2. Текущий вопрос сохраняем в поле `session_state` в ответе навыка
3. При получении фразы от пользователя считываем текущий вопрос из поля `state.session`

[Дифф с предыдущим шагом][diff]

[Назад][prev] | [Готово][next]

[prev]: https://github.com/vitalets/alice-workshop/tree/step15
[diff]: https://github.com/vitalets/alice-workshop/compare/step15...step16
[next]: http://bit.ly/alice-workshop_step17
